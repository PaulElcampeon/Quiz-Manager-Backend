(this["webpackJsonpquiz-manager"]=this["webpackJsonpquiz-manager"]||[]).push([[0],{24:function(e,t,n){e.exports=n(36)},29:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(13),o=n.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(29);var r=n(1),s=n(9),u=function(e){return{type:"LOGGED_IN",loggedIn:e}},l=function(e){return{type:"UPDATE_TOKEN",token:e}},m=function(e){return{type:"GET_QUIZZES",token:e}},d=function(e){return{type:"UPDATE_ALL_QUIZ_IN_STORE",quizzes:e}},p=function(e){return{type:"UPDATE_MESSAGE",message:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN":return t.loggedIn;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MESSAGE":return t.message;default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:null,permLv:1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TOKEN":return t.token;default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ALL_QUIZ_IN_STORE":return t.quizzes;case"UPDATE_ONE_QUIZ_IN_STORE":var n=t.quiz;return e.map((function(e){return e.quizTitle===n.quizTitle?n:e}));case"ADD_QUIZ_IN_STORE":return e.concat(t.quiz);case"DELETE_QUIZ_IN_STORE":return e.filter((function(e){return t.quizId!==e.quizTitle}));default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGING_IN":return t.logginIn;default:return e}},b=Object(s.c)({loggingIn:v,quizzes:g,loggedIn:h,message:E,token:f}),O=function(e,t){return fetch("/quiz/create",{method:"post",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})},q=function(e){var t=e.username,n=e.password;return t.length>0&&n.length>0},_=n(22),z=function e(){Object(_.a)(this,e)};z.storeUserData=function(e){sessionStorage.setItem("quiz-manager",JSON.stringify(e))},z.getUserData=function(){return JSON.parse(sessionStorage.getItem("quiz-manager"))},z.removeUserData=function(){sessionStorage.removeItem("quiz-manager")};var N=z,k=function(e){return function(e){return function(t){switch(t.type){case"LOGIN":q(t.credential)?(a=t.credential,fetch("/user/authenticate",{method:"post",body:JSON.stringify(a),headers:{Accept:"application/json","Content-Type":"application/json"}})).then((function(e){return e.json()})).then((function(e){e.status&&202!==e.status?T.dispatch(p("Your password  or username was incorrect")):(T.dispatch(m(e.jwt)),N.storeUserData({token:e.jwt,permLv:e.restrictionLevel}),T.dispatch(l({token:e.jwt,permLv:e.restrictionLevel})),T.dispatch(u(!0)),T.dispatch(p(null)))})).catch((function(e){console.log(e.message),T.dispatch(p("Something wrong happened"))})):T.dispatch(p("Credentials are not valid"));break;case"AUTHENTICATE_TOKEN":(n=t.token,fetch("/user/token/authenticate",{method:"post",body:JSON.stringify({authenticating:!0}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}})).then((function(e){return e.json()})).then((function(e){e.status&&202!==e.status?T.dispatch(p("Something wrong happened")):N.getUserData()&&(T.dispatch(m(N.getUserData().token)),T.dispatch(l({token:N.getUserData().token,permLv:N.getUserData().permLv})),T.dispatch(u(!0)),T.dispatch(p(null)))})).catch((function(e){console.log(e.message),T.dispatch(p("Something wrong happened"))}));break;default:e(t)}var n,a}}},w=function(e){return function(e){return function(t){switch(t.type){case"LOGOUT":T.dispatch(u(!1)),T.dispatch(l({token:null,permLv:1})),N.removeUserData(),T.dispatch(p(null));break;default:e(t)}}}},I=function(e){return function(e){return function(t){switch(t.type){case"GET_QUIZZES":(n=t.token,fetch("/quiz/get",{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}})).then((function(e){return e.json()})).then((function(e){e.status&&202!==e.status?T.dispatch(p("Something wrong happened")):(void 0===e?T.dispatch(d([])):T.dispatch(d(e)),T.dispatch(p(null)))})).catch((function(e){console.log(e.message),T.dispatch(p("Something wrong happened"))}));break;case"DELETE_QUIZ":(function(e,t){return fetch("/quiz/delete",{method:"delete",body:JSON.stringify({quizId:e}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})})(t.quizIdWithToken.quizId,t.quizIdWithToken.token).then((function(e){return e.json()})).then((function(e){e.status&&202!==e.status?T.dispatch(p("Something wrong happened")):(T.dispatch({type:"DELETE_QUIZ_IN_STORE",quizId:t.quizIdWithToken.quizId}),T.dispatch(p(null)))})).catch((function(e){console.log(e.message),T.dispatch(p("Something wrong happened"))}));break;case"CREATE_QUIZ":O(t.quizWithToken.quiz,t.quizWithToken.token).then((function(e){return e.json()})).then((function(e){e.status&&202!==e.status?T.dispatch(p("Something wrong happened")):(T.dispatch({type:"ADD_QUIZ_IN_STORE",quiz:t.quizWithToken.quiz}),T.dispatch(p(null)))})).catch((function(e){console.log(e.message),T.dispatch(p("Something wrong happened"))}));break;case"UPDATE_QUIZ":O(t.quizWithToken.quiz,t.quizWithToken.token).then((function(e){return e.json()})).then((function(e){e.status&&202!==e.status?T.dispatch(p("Something wrong happened")):(T.dispatch({type:"UPDATE_ONE_QUIZ_IN_STORE",quiz:t.quizWithToken.quiz}),T.dispatch(p(null)))})).catch((function(e){console.log(e.message),T.dispatch(p("Something wrong happened"))}));break;default:e(t)}var n}}},j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,T=Object(s.e)(b,j(Object(s.a)(k,w,I))),y=(n(34),n(10)),S=n(4),U=n(3),A=function(e){var t=e.quizTitle,n=e.onClick;return c.a.createElement("div",{className:"quizListItem_holder"},c.a.createElement("button",{className:"quizListBtn",onClick:n},t))},C=function(e){var t=e.answer,n=e.isAnswer,i=e.editeModeEnabled,o=e.onRemove,s=e.onChange,u=e.index,l=Object(r.c)((function(e){return e})).token.permLv,m=Object(a.useState)(t),d=Object(U.a)(m,2),p=d[0],h=d[1],E=Object(a.useState)(n),f=Object(U.a)(E,2),g=f[0],v=f[1],b=n&&l>=2,O=function(e){h(e.target.value),s({answer:e.target.value,isAnswer:g},u)},q=function(e){v(e.target.checked),s({answer:p,isAnswer:e.target.checked},u)};return c.a.createElement("div",null,i?c.a.createElement("div",{className:"quiz_answer"},c.a.createElement("input",{type:"checkbox",onChange:function(e){return q(e)},checked:n?"checked":""}),c.a.createElement("input",{className:"answer_input",type:"text",value:t,onChange:function(e){return O(e)}}),c.a.createElement("input",{className:"removeBtn",type:"button",value:"REMOVE",onClick:o})):c.a.createElement("div",{className:"quiz_answer"},b?c.a.createElement("input",{className:"input_disabled",type:"checkbox",checked:!0,readOnly:!0}):c.a.createElement("input",{type:"checkbox",className:"input_disabled",readOnly:!0}),c.a.createElement("input",{className:"input_disabled answer_input",type:"text",value:p,readOnly:!0})))},D=function(e){var t=e.question,n=e.answers,i=e.editeModeEnabled,o=e.updateQuiz,r=e.index,s=e.removeQuizQuestion,u=Object(a.useState)(n),l=Object(U.a)(u,2),m=l[0],d=l[1],p=function(e){var n=m.filter((function(t,n){return n!==e}));d(n),o({question:t,answers:n},r)},h=function(e,n){var a=m.map((function(t,a){return a===n?e:t}));d(a),o({question:t,answers:a},r)};return c.a.createElement("div",{className:"quiz_question_holder"},i?c.a.createElement("input",{type:"text",className:"quiz_question_holder_question_input",onChange:function(e){o({question:e.target.value,answers:m},r)},placeholder:"Question",value:t}):c.a.createElement("h1",{className:"quiz_question_title"},t),c.a.createElement("div",{className:"quiz_question_answers_holder"},m.map((function(e,t){return c.a.createElement(C,Object.assign({key:t,editeModeEnabled:i,index:t},e,{onChange:h,onRemove:function(){return p(t)}}))}))),i&&m.length<=4?c.a.createElement("button",{className:"quiz_question_holder_add",onClick:function(){var e=m.concat({answer:"",isAnswer:!1});d(e),o({question:t,answers:e},r)}},"ADD ANSWER"):"",i?c.a.createElement("button",{className:"quiz_question_holder_add",onClick:function(){s(r)}},"REMOVE QUESTION"):"")},L=function(e){var t=e.quizItem,n=e.onClose,i=t.quizTitle,o=t.questions,s=Object(r.b)(),u=Object(r.c)((function(e){return e})).token,l=u.permLv,m=u.token,d=Object(a.useState)(!1),p=Object(U.a)(d,2),h=p[0],E=p[1],f=Object(a.useState)(o),g=Object(U.a)(f,2),v=g[0],b=g[1],O=function(){n()},q=function(e,t){var n=v.map((function(n,a){return a===t?e:n}));b(n)},_=function(e){var t=v.filter((function(t,n){return n!==e}));b(t)};return c.a.createElement("div",{className:"quiz_item_holder"},c.a.createElement("div",{className:"quiz_item"},c.a.createElement("h1",{className:"quiz_title"},i),c.a.createElement("div",{className:"quiz_questions_holder"},v.map((function(e,t){return c.a.createElement(D,Object.assign({key:t,editeModeEnabled:h},e,{index:t,updateQuiz:q,removeQuizQuestion:_}))})))),c.a.createElement("div",{className:"quiz_item_buttons_holder"},h?c.a.createElement("button",{className:"quizItemBtn",onClick:function(){var e=v.concat({question:"",answers:[]});b(e)}},"ADD QUESTION"):"",3===l?c.a.createElement("button",{className:"quizItemBtn",onClick:function(){E(!0)}},"EDIT"):"",3===l?c.a.createElement("button",{className:"quizItemBtn",onClick:function(){t.questions=v,s({type:"UPDATE_QUIZ",quizWithToken:{quiz:t,token:m}}),O()}},"SAVE"):"",3===l?c.a.createElement("button",{className:"quizItemBtn",onClick:function(){s({type:"DELETE_QUIZ",quizIdWithToken:{quizId:i,token:m}}),O()}},"REMOVE"):"",c.a.createElement("button",{className:"quizItemBtn",onClick:O},"CLOSE")))},Q=function(e){var t=Object(r.c)((function(e){return e})).quizzes,n=Object(a.useState)(!1),i=Object(U.a)(n,2),o=i[0],s=i[1],u=Object(a.useState)(null),l=Object(U.a)(u,2),m=l[0],d=l[1];return c.a.createElement("div",{className:"quizzes"},c.a.createElement("div",{className:"quizzes_holder"},t.map((function(e,t){return c.a.createElement(A,Object.assign({key:t},e,{onClick:function(){d({quizItem:e,index:t}),s(!0)}}))}))),o?c.a.createElement(L,Object.assign({onClose:function(){s(!1)}},m)):"")},x=function(e){var t=Object(r.b)(),n=Object(r.c)((function(e){return e})).loggedIn,i=Object(a.useState)(""),o=Object(U.a)(i,2),s=o[0],u=o[1],l=Object(a.useState)(""),m=Object(U.a)(l,2),d=m[0],p=m[1];return c.a.createElement("div",null,n?c.a.createElement(S.a,{to:{pathname:"/quizzes",state:{from:e.location}}}):c.a.createElement("div",{className:"loginForm_holder"},c.a.createElement("div",{className:"loginInput"},c.a.createElement("input",{type:"text",placeholder:"username",value:s,onChange:function(e){u(e.target.value)}})),c.a.createElement("div",{className:"loginInput"},c.a.createElement("input",{type:"password",placeholder:"password",value:d,onChange:function(e){p(e.target.value)}})),c.a.createElement("div",{className:"loginBtn"},c.a.createElement("input",{type:"button",value:"login",onClick:function(){t({type:"LOGIN",credential:{username:s,password:d}})}}))))},R=function(e){var t=Object(r.b)(),n=Object(r.c)((function(e){return e})).loggedIn;return Object(a.useEffect)((function(){N.getUserData()&&N.getUserData().token&&t({type:"AUTHENTICATE_TOKEN",token:N.getUserData().token})})),c.a.createElement("div",null,n?c.a.createElement(S.a,{to:"/quizzes"}):c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"top_div"},c.a.createElement(x,null)),c.a.createElement("div",{className:"bottom_div"},c.a.createElement("h1",null,"QUIZ MANAGER"))))},Z=function(e){var t=e.onRemove,n=e.onUpdateAnswer,i=e.index,o=e.answer,r=e.isAnswer,s=Object(a.useState)(r),u=Object(U.a)(s,2),l=u[0],m=u[1];return c.a.createElement("div",{className:"create-answer-section"},c.a.createElement("input",{type:"checkbox",onChange:function(e){var t=!l;m(t),n({answer:o,isAnswer:t},i)},checked:l?"checked":""}),c.a.createElement("input",{className:"create-answer-input",type:"text",value:o,onChange:function(e){n({answer:e.target.value,isAnswer:l},i)}}),c.a.createElement("input",{className:"create-remove-answer",type:"button",value:"REMOVE",onClick:function(){return t(i)}}))},G=function(e){var t=e.question,n=e.answers,i=e.index,o=e.updateQuestion,r=e.removeQuestion,s=Object(a.useState)(t),u=Object(U.a)(s,2),l=u[0],m=u[1],d=Object(a.useState)(n),p=Object(U.a)(d,2),h=p[0],E=p[1],f=function(e){var t=h.filter((function(t,n){return n!==e}));t.forEach((function(e){return console.log(e)})),E(t),o({question:l,answers:t},i)},g=function(e,t){var n=h.map((function(n,a){return a===t?e:n}));E(n),o({question:l,answers:n},i)};return c.a.createElement("div",{className:"create-question-holder"},c.a.createElement("input",{className:"answer_input",type:"text",value:t,placeholder:"Quiz Question",onChange:function(e){return function(e){var t=e.target.value;m(t),o({question:t,answers:h},i)}(e)}}),n.map((function(e,t){return c.a.createElement(Z,Object.assign({key:t,index:t,onUpdateAnswer:g,onRemove:f},e))})),c.a.createElement("button",{className:"create-add-answer",onClick:function(){if(!(h.length>4)){var e=h.concat({answer:"",isAnswer:!1});E(e),o({question:l,answers:e},i)}}},"ADD ANSWER"),c.a.createElement("button",{className:"create-add-answer",onClick:function(){return r(i)}},"REMOVE QUESTION"))},W=function(e){var t=Object(r.b)(),n=Object(r.c)((function(e){return e})).token,i=Object(a.useState)({title:"",questions:[]}),o=Object(U.a)(i,2),s=o[0],u=o[1],l=Object(a.useState)(""),m=Object(U.a)(l,2),d=m[0],p=m[1],h=Object(a.useState)([]),E=Object(U.a)(h,2),f=E[0],g=E[1],v=function(e,t){var n=s.questions.map((function(n,a){return a===t?e:n}));g(n),s.questions=n,u(s)},b=function(e){var t=f.filter((function(t,n){return n!==e}));s.questions=t,g(t),u(s)};return c.a.createElement("div",{className:"create-view-holder"},c.a.createElement("input",{className:"create-title",type:"text",value:d,placeholder:"Quiz Title",onChange:function(e){p(e.target.value),s.title=e.target.value,u(s)}}),c.a.createElement("div",{className:"create-questions-holder"},f.length>0?f.map((function(e,t){return c.a.createElement(G,Object.assign({key:t,index:t,removeQuestion:b,updateQuestion:v},e))})):""),c.a.createElement("div",{className:"create-button-holder"},c.a.createElement("button",{className:"create-button",onClick:function(){var e=f.concat({question:"",answers:[]});g(e),s.questions=e,u(s)}},"ADD QUESTION")),c.a.createElement("div",{className:"create-button-holder"},c.a.createElement("button",{className:"create-button",onClick:function(){t({type:"CREATE_QUIZ",quizWithToken:{quiz:{quizTitle:d,questions:f},token:n.token}}),e.history.push("/quizzes")}},"SAVE")))},B=function(e){var t=e.requiresLoggedIn,n=e.permission,a=e.to,i=e.title,o=Object(S.g)(),s=Object(r.b)(),u=Object(r.c)((function(e){return e})),l=u.loggedIn,m=u.token.permLv>=n&&(t===l||!1===t);"LOGIN"===i&&l&&(m=!1);return c.a.createElement("div",{className:m?"custom_button_holder":""},m?c.a.createElement(y.b,{onClick:function(e){"LOGOUT"===i&&(e.preventDefault(),s({type:"LOGOUT"}),o.push("/"))},activeClassName:"nav_link_active",className:"custom_button",to:"/".concat(a)},i):"")},M=[{directorty:"Login",to:"",title:"LOGIN",requiresLoggedIn:!1,permission:1},{directorty:"Quizzes",to:"quizzes",title:"QUIZZES",requiresLoggedIn:!0,permission:1},{directorty:"Create",to:"create",title:"CREATE",requiresLoggedIn:!0,permission:3},{directorty:"Logout",to:"/logout",title:"LOGOUT",requiresLoggedIn:!0,permission:1}],P=function(e){return c.a.createElement("div",{className:"navbar_holder"},M.map((function(e,t){return c.a.createElement(B,{key:t,to:e.to,title:e.title,requiresLoggedIn:e.requiresLoggedIn,permission:e.permission})})))},J=n(23),V=function(e){var t=e.component,n=Object(J.a)(e,["component"]),a=Object(r.c)((function(e){return e})).token;return c.a.createElement(S.b,Object.assign({},n,{render:function(e){return a.token?c.a.createElement(t,e):c.a.createElement(S.a,{to:{pathname:"/",state:{from:e.location}}})}}))},K=function(e){var t=Object(r.b)(),n=Object(r.c)((function(e){return e})).message;return c.a.createElement("div",{className:"message_wrapper"},c.a.createElement("p",{className:"message_text"},n),c.a.createElement("button",{className:"message_ok_btn",onClick:function(){t(p(null))}},"OK"))},F=function(e){Object(r.b)();var t=Object(r.c)((function(e){return e})).message;return c.a.createElement(y.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(P,null),c.a.createElement(S.d,null,c.a.createElement(S.b,{exact:!0,path:"/",component:R}),c.a.createElement(S.b,{exact:!0,path:"/login",component:function(){return c.a.createElement(S.a,{to:"/"})}}),c.a.createElement(V,{exact:!0,path:"/quizzes",component:Q}),c.a.createElement(V,{exact:!0,path:"/create",component:W}),c.a.createElement(S.b,{path:"*",component:function(){return"NOT FOUND"}})),t&&c.a.createElement(K,null)))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(r.a,{store:T},c.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.613ca9e4.chunk.js.map